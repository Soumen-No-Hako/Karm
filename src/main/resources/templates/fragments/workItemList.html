<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<div th:fragment="itemList">

  <div th:if="${workItems.empty}" class="text-center py-5">
    <div class="text-muted mb-2"><i class="fas fa-clipboard-list fa-2x"></i></div>
    <p class="text-muted">No work items found.</p>
  </div>
  <div th:unless="${workItems.empty}" class="list-group list-group-flush">
    <div th:each="item : ${workItems}" class="list-group-item p-3 border-bottom">
      <div class="d-flex w-100 justify-content-between align-items-center">

        <a th:href="@{/workitem/{id}(id=${item.workItemId})}" class="text-decoration-none flex-grow-1">
          <h6 class="mb-1 fw-bold text-dark" th:text="${item.workItemTitle}">Title</h6>
          <p class="card-text text-secondary"
             style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;"
             th:text="${item.workItemDescription}">
            Desc
          </p>
        </a>

        <div class="ms-3 flex-shrink-0">
          <form action="/workitem/status" method="post">
            <input type="hidden" name="projectId" th:value="${projectId}">
            <input type="hidden" name="workItemId" th:value="${item.workItemId}">

            <select name="status" class="form-select form-select-sm fw-bold"
                    onchange="this.form.submit()"
                    th:classappend="${item.status == 'DONE' ? 'text-success border-success' :
                                                 (item.status == 'IN-PROGRESS' ? 'text-info border-info' : 'text-warning border-warning')}">
              <option value="TO-DO" th:selected="${item.status == 'TO-DO'}">To Do</option>
              <option value="IN-PROGRESS" th:selected="${item.status == 'IN-PROGRESS'}">In Progress</option>
              <option value="DONE" th:selected="${item.status == 'DONE'}">Done</option>
              <option value="CANCELED" th:selected="${item.status == 'CANCELED'}">Cancelled</option>
            </select>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
</html>